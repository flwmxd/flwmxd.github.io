

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="Prime`s Portfolio">
  <meta name="author" content="Prime">
  <meta name="keywords" content="Graphics Game Engine OpenGL C++ Vulkan">
  
  <title>Cloth Simulation - Portfolio</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"flwmxd.github.io","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":6},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Prime`s Portfolio</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/back2.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Cloth Simulation">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-04-10 09:32" pubdate>
        April 10, 2021 am
      </time>
    </span>
  
</div>

<div class="mt-1">
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      19
       minutes
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Cloth Simulation</h1>
            
            <div class="markdown-body">
              <p>This is an OpenGL Simulation Application, which written by c++.</p>
<p>They are assignments 3 from course Animation Simulation University of Leeds</p>
<h2 id="Repo-is-here"><a href="#Repo-is-here" class="headerlink" title="Repo is here"></a>Repo is <a target="_blank" rel="noopener" href="https://github.com/flwmxd/Simulations">here</a></h2><p>You will build a cloth simulation system to show different fabric behaviours. It should come with a GUI where you can load/write cloth mesh files (OBJ<br>files). It should also be able to detect and resolve simple cloth-object collisions. </p>
<p>For your hard work, the Mistress Fingercutter has graciously agreed to give you rewards for: </p>
<ol>
<li><p>A GUI to load OBJ files and render them in OpenGL (simple rendering without textures is<br>acceptable). (2g) </p>
</li>
<li><p>The same GUI to write OBJ files. This should write a single frame into an OBJ file.(2g) </p>
</li>
<li><p>A mass-spring model to simulate a piece of cloth with arbitrary shapes specified by an OBJ file.<br>The vertices are modelled as point masses and the edges are modelled as springs. The<br>simulation is free falling onto the floor. (4g) </p>
</li>
<li><p>Simulation Scenario 1 (SS1): a square piece of cloth floating horizontally in the air at first, which<br>then free-falls onto a sphere on the ground. (4g) </p>
</li>
<li><p>Simulation Scenario 2 (SS2): a square piece of cloth floating horizontally in the air first, then<br>free-falling with two adjacent corners fixed in the space. (4g) </p>
</li>
<li><p>SS1 with the sphere rotating in-place round the Y axis (up-axis) and friction between the sphere<br>and the cloth. (3g) </p>
</li>
<li><p>SS2 with wind blowing. (3g) </p>
</li>
<li><p>Texture, lighting, and the ability to export the simulation result to a video. (3g) </p>
</li>
</ol>
<p>There are several places in town where you can find assistance.<br>Hint 1: The Mesh Master at the Asylum of Geometry. (You can find the specs of OBJ files at<br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Wavefront_.obj_file">https://en.wikipedia.org/wiki/Wavefront_.obj_file</a> and some sample code in Minerva under Lab<br>Resources) </p>
<p>Hint 2: The Geomonger (a person who sells raw geometries) at the Mesh take-out place. (You can find other mesh software to help you debug and test your system. Meshlab: <a target="_blank" rel="noopener" href="http://www.meshlab.net/">http://www.meshlab.net/</a>) </p>
<p>Hint 3: It is acceptable to export frames into images first, then use tools such as ffmpeg to make videos. </p>
<p>Hint 4: The collision between the ball and the cloth should not be sticky. It can be implemented by a post-processing step to move any vertex inside the sphere to the closest point on the surface of the sphere. </p>
<p>Hint 5: Wind blowing can be modelled as a steady force in a fixed direction. Hint 6: At each cloth vertex, the friction force between the sphere and the cloth is always in the opposite direction of their relative motions. The plane the friction force lies in is orthogonal to the surface normal of the sphere at that cloth vertex</p>
<h1 id="1-Spring-Mass-System"><a href="#1-Spring-Mass-System" class="headerlink" title="1. Spring-Mass System"></a>1. Spring-Mass System</h1><p>we consider the cloth as a collection of particles interconnected with three types of springs:</p>
<p><img src="/images/mass-spring/1.jpg" srcset="/img/loading.gif" lazyload alt="springs"></p>
<h2 id="1-1-Particles"><a href="#1-1-Particles" class="headerlink" title="1.1 Particles"></a>1.1 Particles</h2><p>We assume the cloth contains n×n (evenly spaced) particles and use [<em><strong>i</strong></em>,<em><strong>j</strong></em>] (where 0≤<em>i</em>,<em>j</em>&lt;n) to denote the particle located at the i-th row and j-th column. Each particle  [<em><strong>i</strong></em>,<em><strong>j</strong></em>] has the following states:</p>
<ul>
<li><strong>Mass</strong> <em>m</em> (we assume all particles to have identical masses).</li>
<li><strong>Position</strong> $x_{i,j}(t)$.</li>
<li><strong>Velocity</strong> $v_{i,j}(t)$ which equals the derivate of $x_{i,j}(t)$ with respect to t: $v_{i,j}(t)$ = $\dot x_{i,j}(t)$.</li>
</ul>
<h2 id="1-2-Springs"><a href="#1-2-Springs" class="headerlink" title="1.2 Springs"></a>1.2 Springs</h2><p>There are three types of springs connecting all particles: structural, shear, and flexion (bend).</p>
<ul>
<li><strong>Structural</strong>: each particle [<em><strong>i</strong></em>,<em><strong>j</strong></em>] is connected to (up to) four particles via structural connections: [<em><strong>i</strong></em>,<em><strong>j+1</strong></em>], [<em><strong>i</strong></em>,<em><strong>j−1</strong></em>], [<em><strong>i+1</strong></em>,<em><strong>j</strong></em>], [<em><strong>i−1</strong></em>,<em><strong>j</strong></em>].</li>
<li><strong>Shear</strong>: each particle [<em><strong>i</strong></em>,<em><strong>j</strong></em>] is connected to (up to) four particles via shear connections: [<em><strong>i+1</strong></em>,<em><strong>j+1</strong></em>], [<em><strong>i+1</strong></em>,<em><strong>j−1</strong></em>], [<em><strong>i−1</strong></em>,<em><strong>j−1</strong></em>], [<em><strong>i−1</strong></em>,<em><strong>j+1</strong></em>].</li>
<li><strong>Flexion</strong>: each particle [<em><strong>i</strong></em>,<em><strong>j</strong></em>] is connected to (up to) four particles via flexion connections: [<em><strong>i</strong></em>,<em><strong>j+2</strong></em>], [<em><strong>i</strong></em>,<em><strong>j−2</strong></em>], [<em><strong>i+2</strong></em>,<em><strong>j</strong></em>], [<em><strong>i−2</strong></em> , <em><strong>j</strong></em>].<br>Thus, each particle can have up to 12 directly connected neighbors.</li>
</ul>
<p><strong>Stiffness</strong>: in this project, we assume all structural springs to have stiffness K0, shear springs K1, and flexion strings K2.</p>
<p><strong>Rest length</strong>: generally, a piece of cloth is considered to be in its rest state when there is no deformation (caused by stretching, shearing, or bending).</p>
<h2 id="1-3-Forces"><a href="#1-3-Forces" class="headerlink" title="1.3 Forces"></a>1.3 Forces</h2><p>There are three types of forces you will need to consider for this project:</p>
<ul>
<li><p><strong>Spring forces</strong>: given spring connecting two particles located at p and q with stiffness K and rest length L0, the spring force acting on p equals<br>$F_{spring}=K(L_0−∥p−q∥)\frac{p−q}{∥p−q∥}$.<br>This force changes over time as the particles move.</p>
</li>
<li><p><strong>Gravity</strong>: each particle is affected by (simple) gravity given by</p>
</li>
</ul>
<p>$$F_G=\left( \begin{array} c 0 \ -mg \ 0 \end{array} \right) $$</p>
<ul>
<li><strong>Damping</strong>: for a particle with velocity v, the amount of damping force it receives equals $F_{damp} =−c_d * v$ where $c_d$&gt;0 is a constant. This force changes over time as $v$ changes.</li>
</ul>
<h2 id="1-4-Integration"><a href="#1-4-Integration" class="headerlink" title="1.4 Integration"></a>1.4 Integration</h2><p>Animating a mass-spring system involves solving an initial value problem. In particular, for each particle [i,j] you are given its mass m (which stays constant for all particles), initial position $x_{i,j}(0)$ and velocity $v_{i,j}(0)$. Given $Δt$&gt;0, you need to use <strong>Euler’s method</strong> to compute the position and velocity of each particle at time-steps $Δt, 2Δt, 3Δt$, ….</p>
<p>You need to pin two particles [ <em>n−1</em> ,<em>0</em>]  and [ <em>n−1</em>,<em>n−1</em>], which correspond to the upper left and right corners of the cloth. That is, the positions of these particles are fixed to their inital values. If no particle is pinned in place, the entire cloth will undergo a never-ending free fall because of gravity!</p>
<p><img src="/images/cloth-.gif" srcset="/img/loading.gif" lazyload alt="cloth"></p>
<h2 id="1-5-Wind"><a href="#1-5-Wind" class="headerlink" title="1.5 Wind"></a>1.5 Wind</h2><p>Applying a wind force to the system involves applying a wind force a direction or directions in every particles.</p>
<p>$$ F =F_G + F_{wind} $$</p>
<h3 id="Cloth-Wind"><a href="#Cloth-Wind" class="headerlink" title="Cloth Wind"></a>Cloth Wind</h3><p><img src="/images/cloth-wind.gif" srcset="/img/loading.gif" lazyload alt="wind"></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Simulation/">Simulation</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/04/10/FFD/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Free-Form Deformation</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/04/10/Simplification/">
                        <span class="hidden-mobile">Simplification Using Quadric Error Metrics</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  





  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8.8.3/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>







<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
